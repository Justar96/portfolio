<!DOCTYPE html><!-- Last Published: Wed Feb 12 2025 20:02:21 GMT+0000 (Coordinated Universal Time) --><html data-wf-domain="severance-mdr.webflow.io" data-wf-page="67a3c260f7c03d9054429d6d" data-wf-site="67a3c260f7c03d9054429d73"><head><meta charset="utf-8"><title>Macrodata Refinement (MDR) | Lumon Industries</title><meta content="Join the MDR team and be part of the revolutionary Severed program. Lumon Industries is a leading biotech company" name="description"><meta content="Macrodata Refinement (MDR) | Lumon Industries" property="og:title"><meta content="Join the MDR team and be part of the revolutionary Severed program. Lumon Industries is a leading biotech company" property="og:description"><meta content="images/67acf28ee359c3f238019e4f_Screenshot%202025-02-12%20at%2020.12.08.webp" property="og:image"><meta content="Macrodata Refinement (MDR) | Lumon Industries" property="twitter:title"><meta content="Join the MDR team and be part of the revolutionary Severed program. Lumon Industries is a leading biotech company" property="twitter:description"><meta content="https://cdn.prod.website-files.com/67a3c260f7c03d9054429d73/67acf28ee359c3f238019e4f_Screenshot%202025-02-12%20at%2020.12.08.webp" property="twitter:image"><meta property="og:type" content="website"><meta content="summary_large_image" name="twitter:card"><meta content="width=device-width, initial-scale=1" name="viewport"><link href="css/severance-mdr.webflow.eb039758e.css" rel="stylesheet" type="text/css"><link href="https://fonts.googleapis.com" rel="preconnect"><link href="https://fonts.gstatic.com" rel="preconnect" crossorigin="anonymous"><script src="js/webfont.js" type="text/javascript"></script><script type="text/javascript">WebFont.load({  google: {    families: ["Open Sans:300,300italic,400,400italic,600,600italic,700,700italic,800,800italic","Merriweather:300,300italic,400,400italic,700,700italic,900,900italic","Lato:100,100italic,300,300italic,400,400italic,700,700italic,900,900italic","Inconsolata:400,700"]  }});</script><script type="text/javascript">!function(o,c){var n=c.documentElement,t=" w-mod-";n.className+=t+"js",("ontouchstart"in o||o.DocumentTouch&&c instanceof DocumentTouch)&&(n.className+=t+"touch")}(window,document);</script><link href="fonts/67acf3996271ddedfa3e81d2_Favicon%20Lumon.svg" rel="shortcut icon" type="image/x-icon"><link href="fonts/67acf3c7f274634235538697_webclip%20Lumon.svg" rel="apple-touch-icon"><!--- Website Designed and Developed by Rigo Cruz --->

<style>
  html, body { overscroll-behavior: none; }
  input,
textarea,
button,
select,
a {
  -webkit-tap-highlight-color: rgba(0,0,0,0);
}
 
 </style>
<style>
body .transition {display: block}
.w-editor .transition {display: none;}
.no-scroll-transition {overflow: hidden; position: relative;}
</style>

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"></head><body><div class="custom"><div class="custom-page w-embed"><style>
  .scanlines {
     
      background: repeating-linear-gradient(
        to bottom,
        transparent 0px,
        transparent 1px,
        rgba(12, 31, 39, 0.40) 1px,
        rgba(12, 31, 39, 0.50) 2px
      );
      image-rendering: pixelated;
    }
    
      .scanlines.vertical{
     
      background: repeating-linear-gradient(
        to right,
        transparent 0px,
        transparent 1px,
        rgba(12, 31, 39, 0.40) 1px,
        rgba(12, 31, 39, 0.50) 2px
      );
      image-rendering: pixelated;
    }
        
</style></div></div><div class="page"><main class="page-main"><div class="canvas-wrapper"><div class="x-w-100 x-child-center"><div class="vertical-m position-relative"><div><div class="top-wrapper"><div class="inner-top-wrap"><div class="horizontal-end-to-end x-z-index"><h1 class="h4 mob">Macrodata</h1><h1 class="h4 mob"><span id="percentage" class="percentage">0%&nbsp;</span>Complete</h1></div><div class="logo-wrap-abs"><div class="code-embed w-embed"><svg width="100%" height="100%" viewBox="0 0 631 325" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M315.153 0.900664C290.138 3.50486 268.537 18.3668 250.394 45.3517L246.307 51.4132L284.121 51.5479C304.958 51.5928 338.82 51.5928 359.388 51.5479L396.842 51.4132L392.935 45.5762C376.409 20.8363 357.098 6.37846 334.688 1.84356C329.389 0.765964 320.542 0.361864 315.153 0.900664Z" fill="currentColor"></path>
<path d="M278.103 3.1457C238.493 8.6235 202.7 21.1955 173.06 40.0535C168.165 43.1516 157.073 51.054 157.073 51.4581C157.073 51.5479 175.126 51.6377 197.177 51.6377H237.235L241.277 45.0823C251.921 27.7958 264.226 14.9544 278.821 5.7948C284.121 2.4722 284.435 2.2926 284.165 2.3375C284.031 2.3375 281.336 2.6967 278.103 3.1457Z" fill="currentColor"></path>
<path d="M361.679 3.9539C361.903 4.1784 364.104 5.6601 366.574 7.2765C375.017 12.8441 384.807 21.9588 392.172 31.0735C395.405 35.0696 402.097 44.8578 404.477 49.0335L405.914 51.6377H443.233H480.553L477.679 49.4825C465.059 39.9188 446.153 29.1428 429.985 22.2731C411.483 14.4156 389.612 8.1296 367.876 4.4927C361.813 3.5049 361.05 3.4151 361.679 3.9539Z" fill="currentColor"></path>
<path d="M214.332 8.8031C174.812 15.5381 137.447 26.3141 106.775 39.829C99.9484 42.8373 87.5534 48.809 84.7691 50.4254L82.7482 51.6377H113.511H144.274L148.315 48.2702C166.638 33.0042 192.551 18.726 219.047 9.3868C222.371 8.2194 224.706 7.2316 224.212 7.2316C223.718 7.2316 219.272 7.95 214.332 8.8031Z" fill="currentColor"></path>
<path d="M423.608 11.4073C447.59 20.4771 471.122 33.7226 488.142 47.6865L492.948 51.6377L521.151 51.5479L549.354 51.4132L543.964 48.6294C515.133 33.8573 477.544 21.0159 439.775 13.0686C432.859 11.6318 currentColor"></path>
<path d="M61.2816 64.3894C57.8685 66.6793 54.2758 69.2386 53.2429 70.0917C52.2549 70.9448 50.9525 72.0224 50.3687 72.5163C49.74 73.0102 48.3029 74.2674 47.1352 75.3001C45.9676 76.3777 44.8898 77.2308 44.7101 77.2308C44.3509 77.2308 38.8271 82.3494 36.8511 84.5046C36.5367 84.8189 36.0427 85.3128 35.7283 85.5822C35.414 85.8516 34.8301 86.4802 34.426 86.9292C34.0218 87.4231 33.1685 88.1864 32.4949 88.6354C31.8661 89.0844 31.3272 89.6681 31.3272 89.8477C31.3272 90.611 27.9591 94.2928 27.2854 94.2928C27.016 94.2928 26.8363 94.6071 26.8363 94.9663C26.8363 95.3704 26.522 95.7745 26.1627 95.9092C25.8034 96.0888 25.4891 96.448 25.4891 96.8072C25.4891 97.1664 25.0849 97.6603 24.5909 97.9746C24.0969 98.2889 23.6927 98.7828 23.6927 99.0971C23.6927 99.3665 23.558 99.6808 23.3783 99.7706C22.8843 99.9502 19.6509 104.036 19.6509 104.44C19.6509 104.575 19.2916 105.069 18.8425 105.473C18.4383 105.877 17.7647 106.775 17.4054 107.538C17.0461 108.257 16.4623 109.155 16.1929 109.469C15.8785 109.783 15.6091 110.277 15.6091 110.547C15.6091 110.816 15.2498 111.355 14.8007 111.759C14.3516 112.163 13.678 113.151 13.3187 113.914C13.0043 114.722 12.5552 115.396 12.3756 115.396C12.1511 115.396 12.0163 115.71 12.0163 116.024C12.0163 116.384 11.5223 117.641 10.8936 118.808C10.2649 119.976 9.77087 121.188 9.77087 121.502C9.77087 121.861 9.63615 122.131 9.45651 122.131C8.96251 122.131 7.97451 124.376 7.97451 125.364C7.97451 125.813 7.83978 126.172 7.61524 126.172C7.12124 126.172 6.26797 128.372 5.90869 130.527C5.72906 131.605 5.4596 132.458 5.23506 132.458C5.01051 132.458 4.83087 132.862 4.83087 133.311C4.83087 133.805 4.65124 134.344 4.38178 134.478C4.15724 134.613 3.93269 135.556 3.93269 136.544C3.93269 137.487 3.79797 138.295 3.61833 138.295C2.94469 138.295 2.13633 140.764 2.13633 142.83C2.13633 143.997 1.95669 145.12 1.68724 145.254C1.46269 145.389 1.23815 146.512 1.23815 147.724C1.23815 148.936 1.05851 150.014 0.833965 150.148C0.60942 150.328 0.474693 153.785 0.564511 158.186C0.789056 167.166 1.14833 171.521 1.73215 171.521C1.95669 171.521 2.13633 172.913 2.13633 174.664C2.13633 176.46 2.31597 177.807 2.58542 177.807C2.85487 177.807 3.03451 178.301 3.03451 178.929C3.03451 179.558 3.25906 180.052 3.4836 180.052C3.75306 180.052 3.93269 180.68 3.93269 181.399C3.93269 182.656 4.65124 184.452 5.32487 184.991C5.50451 185.126 5.77397 186.293 5.9536 187.55C6.13324 188.852 6.4476 190.02 6.67215 190.199C6.89669 190.334 7.07633 190.828 7.07633 191.322C7.07633 191.771 7.30087 192.175 7.52542 192.175C7.79487 192.175 7.97451 192.534 7.97451 192.983C7.97451 193.477 8.37869 194.195 8.87269 194.644C9.36669 195.093 9.77087 195.767 9.77087 196.171C9.77087 197.159 12.0612 201.694 13.0043 202.547C13.4534 202.951 13.8127 203.669 13.8127 204.163C13.8127 204.612 14.172 205.42 14.6211 205.914C15.654 207.127 16.4623 208.384 16.7767 209.327C16.9563 209.776 17.2258 210.135 17.4503 210.135C17.6749 210.135 17.8545 210.449 17.8545 210.808C17.8545 211.212 18.5731 212.245 19.4712 213.098C20.3245 213.996 21.2227 215.164 21.4921 215.658C22.0311 217.005 22.8394 218.217 23.9172 219.339C24.4112 219.878 25.2196 220.866 25.7136 221.539C26.2076 222.258 27.3303 223.56 28.1836 224.503C30.3392 226.838 31.3721 228.095 31.1027 228.095C30.968 228.095 31.462 228.679 32.1356 229.442C32.8541 230.16 33.6625 230.789 33.9769 230.789C34.2463 230.789 34.4709 231.058 34.4709 231.417C34.4709 232.675 46.3269 242.777 55.1291 249.018L57.5991 250.769L92.9874 250.859C113.691 250.949 128.331 250.814 128.331 250.59C128.331 250.365 126.984 248.614 125.277 246.639C119.798 240.308 114.319 232.72 110.008 225.58C107.538 221.45 101.835 210.539 101.835 209.955C101.835 209.821 103.721 209.686 106.011 209.686H110.188L112.119 213.592C117.598 224.682 126.535 237.165 136.235 247.312L139.783 250.994H184.602C221.427 250.994 229.376 250.859 229.376 250.365C229.376 250.051 228.478 247.626 227.4 245.022C224.706 238.601 220.799 226.523 218.598 217.768C217.61 213.817 216.802 210.404 216.802 210.135C216.802 209.865 218.284 209.686 220.754 209.686H224.661L226.143 215.792C229.376 228.993 236.562 248.839 238.673 250.455C239.795 251.263 403.579 251.263 404.612 250.41C406.677 248.839 414.536 226.793 417.59 214.041L418.623 209.686H422.62C426.168 209.686 426.572 209.776 426.392 210.449C426.258 210.898 425.898 212.38 425.629 213.727C423.878 221.854 419.252 236.446 415.749 245.202C414.536 248.12 413.728 250.635 413.863 250.724C414.042 250.814 432.859 250.904 455.718 250.949L497.259 251.039L501.615 246.504C510.777 236.985 519.669 224.548 525.282 213.368L527.124 209.686H531.165C533.59 209.686 535.207 209.865 535.207 210.135C535.207 210.988 530.312 220.327 527.168 225.58C523.037 232.45 518.411 238.871 513.112 245.247C510.687 248.12 508.711 250.59 508.711 250.724C508.711 251.084 570.506 250.994 573.021 250.635C575.042 250.32 575.401 250.096 579.982 246.19C580.61 245.606 581.329 245.157 581.553 245.157C581.778 245.157 581.868 244.977 581.733 244.753C581.598 244.528 582.092 244.124 582.811 243.81C583.574 243.496 584.158 242.957 584.158 242.642C584.158 242.283 584.338 242.014 584.517 242.014C584.966 242.014 586.583 240.622 591.164 236.267C592.781 234.74 594.263 233.483 594.397 233.483C594.577 233.483 595.34 232.585 596.059 231.462C596.822 230.385 597.541 229.442 597.721 229.442C598.035 229.442 598.843 228.634 601.134 226.164C601.673 225.536 602.122 224.817 602.122 224.548C602.122 224.278 602.301 224.054 602.571 224.054C603.244 224.054 606.613 220.372 606.613 219.564C606.613 219.339 607.062 218.711 607.646 218.127C608.184 217.543 608.903 216.556 609.262 215.837C609.622 215.164 610.071 214.625 610.295 214.625C610.475 214.625 610.654 214.355 610.654 213.996C610.654 213.637 610.969 213.278 611.328 213.098C611.687 212.964 612.002 212.47 612.002 211.976C612.002 211.482 612.406 210.853 612.9 210.584C613.394 210.314 613.798 209.821 613.798 209.461C613.798 209.057 614.427 208.159 615.145 207.351C615.864 206.588 616.493 205.69 616.493 205.331C616.493 204.971 616.807 204.388 617.166 204.028C617.526 203.624 617.84 202.951 617.84 202.457C617.84 201.963 618.244 201.155 618.738 200.616C619.232 200.077 619.636 199.359 619.636 199.045C619.636 198.73 619.861 198.461 620.085 198.461C620.355 198.461 620.534 198.147 620.534 197.787C620.534 197.428 620.759 197.114 620.984 197.114C621.253 197.114 621.433 196.62 621.433 196.036C621.433 195.408 621.657 194.779 621.882 194.644C622.151 194.51 622.331 193.881 622.331 193.252C622.331 192.624 622.645 192.04 623.004 191.905C623.364 191.726 623.678 191.277 623.678 190.873C623.678 189.885 624.711 187.685 625.16 187.685C625.34 187.685 625.474 186.787 625.474 185.709C625.474 184.587 625.699 183.554 625.924 183.419C626.193 183.285 626.373 182.746 626.373 182.297C626.373 181.848 626.597 181.399 626.867 181.309C627.136 181.219 627.45 180.187 627.585 179.019C627.72 177.852 628.034 176.774 628.214 176.639C628.438 176.505 628.618 175.741 628.618 174.888C628.618 174.035 628.798 173.227 629.067 173.092C629.337 172.913 629.516 170.713 629.516 167.929C629.516 165.145 629.696 162.945 629.965 162.765C630.549 162.406 630.549 156.839 629.965 156.479C629.696 156.3 629.516 154.1 629.516 151.316C629.516 148.532 629.337 146.332 629.067 146.152C628.798 146.018 628.618 145.299 628.618 144.536C628.618 143.818 628.438 142.875 628.169 142.426C627.944 142.022 627.63 140.495 627.495 139.058C627.316 137.666 627.001 136.499 626.777 136.499C626.552 136.499 626.373 136.095 626.373 135.646C626.373 135.152 626.193 134.613 625.924 134.478C625.699 134.344 625.474 133.491 625.474 132.637C625.474 131.784 625.34 131.111 625.16 131.111C624.666 131.111 623.678 128.866 623.678 127.833C623.678 127.384 623.364 126.711 623.004 126.351C622.645 125.947 622.331 125.274 622.331 124.825C622.331 124.376 622.151 123.837 621.882 123.702C621.612 123.568 621.433 122.939 621.433 122.31C621.433 121.727 621.253 121.233 620.984 121.233C620.759 121.233 620.534 120.919 620.534 120.559C620.534 120.2 620.355 119.886 620.085 119.886C619.861 119.886 619.636 119.437 619.636 118.853C619.636 118.314 619.232 117.551 618.738 117.192C618.244 116.833 617.84 116.204 617.84 115.8C617.84 115.351 617.57 114.722 617.301 114.408C616.987 114.094 616.403 113.196 616.044 112.477C615.684 111.714 615.011 110.816 614.606 110.412C614.157 110.008 613.798 109.379 613.798 109.02C613.798 108.661 613.439 107.987 612.99 107.493C612.541 107.044 612.047 106.281 611.867 105.832C611.732 105.428 611.373 105.069 611.104 105.069C610.879 105.069 610.654 104.755 610.654 104.395C610.654 104.036 610.475 103.722 610.205 103.722C609.981 103.722 609.756 103.452 609.756 103.138C609.756 102.824 609.038 101.791 608.184 100.848C607.331 99.9053 606.613 98.9624 606.613 98.7379C606.613 98.0644 604.637 95.8194 603.065 94.7418C602.571 94.3826 602.122 93.9336 602.122 93.7091C602.122 93.2152 600.819 91.7335 597.541 88.5456C596.104 87.1537 594.936 85.7618 594.936 85.4475C594.936 85.1332 594.757 84.8638 594.532 84.8638C594.308 84.8638 592.601 83.3821 590.715 81.5861C585.281 76.3328 583.08 74.3572 581.733 73.4592C581.014 73.0102 579.847 72.0673 579.173 71.3489C578.455 70.6305 577.736 70.0468 577.556 70.0468C577.197 70.0468 576.568 69.5529 573.38 66.7691C573.021 66.4099 571.628 65.5119 570.281 64.7037C568.934 63.8955 567.542 62.9526 567.182 62.5934C565.251 60.6178 565.566 60.6627 533.815 60.6178C517.154 60.5729 503.501 60.7076 503.456 60.9321C503.456 61.1117 505.522 63.6261 508.082 66.4548C516.166 75.4348 522.678 84.2352 528.381 93.9336L530.716 97.8848H526.315H521.914L519.22 93.5744C513.786 84.7291 505.702 74.7613 496.72 65.8711L491.376 60.5729L451.092 60.4831C428.952 60.4382 410.809 60.528 410.809 60.6627C410.809 60.8423 411.528 62.5485 412.426 64.4792C416.018 72.2918 420.824 85.6271 423.339 94.6071L424.237 97.8848H420.24H416.243L414.851 93.2601C411.797 83.3372 408.114 73.6388 404.207 65.467L401.692 60.2137L321.934 60.1688C278.058 60.1688 241.906 60.3484 241.637 60.528C240.828 61.0219 235.753 72.2918 232.969 79.7452C230.679 85.7169 228.658 91.9131 227.58 95.9541L227.086 97.8848H223.044C219.407 97.8848 219.002 97.795 219.227 97.0766C219.317 96.6725 219.856 94.7867 220.395 92.9458C222.954 83.9658 226.188 74.9858 230.05 66.2303C231.397 63.1771 232.52 60.6178 232.52 60.528C232.52 60.4382 213.074 60.4382 189.317 60.4382L146.07 60.528L139.334 67.1732C131.564 74.896 125.142 82.6637 119.259 91.5988L115.083 97.8848H110.951C108.661 97.8848 106.775 97.7501 106.775 97.6154C106.775 97.4807 107.628 95.9092 108.661 94.1581C114.14 84.6393 122.672 73.3245 130.531 65.0629C133.451 61.9648 134.439 60.6627 133.945 60.4382C133.585 60.3035 118.496 60.2137 100.397 60.2137H67.4791L61.2816 64.3894ZM98.2418 146.377V171.97L128.151 172.06L158.106 172.194V177.582L158.151 182.97L121.011 183.105L83.8709 183.195V151.989V120.784H91.0563H98.2418V146.377ZM182.312 143.773C182.446 169.321 182.357 168.468 185.455 170.713L186.937 171.745L211.053 171.88C234.316 171.97 235.259 171.97 236.921 171.117C240.514 169.276 240.334 170.578 240.604 144.356L240.828 121.008L248.148 120.874L255.424 120.784V145.658C255.424 169.815 255.379 170.668 254.481 173.092C252.594 178.211 248.597 181.668 243.478 182.701C239.526 183.464 182.312 183.374 179.303 182.566C176.114 181.758 173.734 180.411 171.803 178.391C169.288 175.786 168.255 173.003 167.806 167.525C167.357 162.316 167.267 122.535 167.671 121.457C167.896 120.919 169.198 120.784 175.081 120.784H182.177L182.312 143.773ZM289.105 135.197C294.899 143.099 302.354 153.247 305.632 157.737C308.91 162.227 311.874 166.178 312.189 166.492C312.683 166.986 313.087 166.672 314.524 164.696C316.096 162.541 318.566 159.173 328.176 146.152C329.793 143.907 334.643 137.307 338.955 131.425L346.769 120.784H353.191H359.613V151.989V183.195H352.427H345.242L345.152 164.876L345.017 146.601L331.589 164.921L318.162 183.24L312.548 183.105L306.889 182.97L300.018 173.541C296.246 168.333 290.632 160.655 287.579 156.479C284.525 152.259 281.606 148.352 281.067 147.724L280.169 146.601L280.124 164.876V183.195H272.938H265.753V151.989V120.784H272.175H278.597L289.105 135.197ZM444.132 121.188C450.015 121.951 454.281 124.915 456.571 129.719L457.739 132.233V151.989V171.745L456.482 174.439C454.326 179.064 451.048 181.578 445.928 182.701C442.245 183.464 384.807 183.374 381.843 182.566C376.678 181.219 373.04 178.076 371.379 173.631C370.481 171.251 370.436 170.219 370.346 152.573C370.346 139.597 370.481 133.356 370.84 131.964C372.367 126.127 376.992 122.221 383.414 121.278C386.738 120.784 440.359 120.694 444.132 121.188ZM485.223 126.082C488.861 129.001 499.46 137.397 508.711 144.805C517.962 152.169 527.258 159.577 529.369 161.284L533.186 164.337L533.321 142.56L533.411 120.784L540.731 120.874L548.006 121.008L548.141 152.079L548.231 183.195H541.405L534.534 183.15L511.181 164.516C484.056 142.785 480.598 140.091 480.238 140.091C480.104 140.091 479.969 149.789 479.969 161.643V183.195H472.784H465.598V151.989V120.784H472.065H478.577L485.223 126.082Z" fill="currentColor"></path>
<path d="M412.965 130.976C412.291 131.739 403.758 146.691 401.064 151.854C399.941 153.965 399.806 154.728 399.806 158.5C399.806 161.957 399.986 163.124 400.794 164.786C403.938 171.296 410.944 174.798 417.501 173.137C425.629 171.072 430.659 163.214 428.818 155.446C428.279 153.336 417.366 133.131 415.659 131.111C414.671 129.988 413.863 129.988 412.965 130.976Z" fill="currentColor"></path>
<path d="M72.6885 260.153C74.0358 261.456 95.8616 272.77 104.754 276.722C131.025 288.44 165.201 299.082 196.683 305.278C207.865 307.478 224.481 310.397 224.706 310.127C224.796 310.037 223.403 309.499 221.607 308.96C206.158 304.021 183.389 293.29 168.974 284.085C159.004 277.709 142.792 265.182 138.929 260.917L138.076 259.974H105.293C87.2391 259.974 72.5987 260.064 72.6885 260.153Z" fill="currentColor"></path>
<path d="M151.235 261.366C160.486 269.268 175.171 279.191 187.386 285.702C209.751 297.6 233.059 305.772 259.915 311.16C270.468 313.27 284.57 315.381 283.851 314.752C283.671 314.572 281.875 313.495 279.899 312.283C263.911 302.719 248.103 285.387 237.056 265.227L234.137 259.974H191.922L149.663 260.019L151.235 261.366Z" fill="currentColor"></path>
<path d="M243.298 260.243C243.298 261.321 251.786 274.476 256.277 280.403C260.364 285.836 271.86 297.42 276.576 300.923C302.533 320.274 332.488 322.026 359.388 305.862C370.66 299.037 383.19 286.51 392.351 272.815C395.271 268.46 400.031 260.602 400.031 260.198C400.031 260.064 364.777 259.974 321.665 259.974C278.552 259.974 243.298 260.108 243.298 260.243Z" fill="currentColor"></path>
<path d="M406.318 265.003C395.001 285.477 379.507 302.449 362.756 312.687L360.735 313.899L363.205 313.63C371.379 312.642 385.57 309.678 396.708 306.625C422.351 299.621 446.602 288.845 467.035 275.42C473.188 271.379 481.99 264.823 485.358 261.815L487.379 260.019L448.263 259.974H409.103L406.318 265.003Z" fill="currentColor"></path>
<path d="M496.226 262.803C492.05 266.754 481.137 275.33 475.254 279.371C459.895 289.922 443.368 298.543 425.405 305.368C420.959 307.074 417.68 308.466 418.084 308.466C419.297 308.466 435.15 305.502 441.841 304.021C480.777 295.31 513.875 283.995 541.719 269.852C549.668 265.766 558.74 260.827 559.413 currentColor"></path>
<path d="M279.136 324.046C279.675 324.136 280.573 324.136 281.157 324.046C281.695 323.956 281.246 323.866 280.124 323.866C279.001 323.866 278.552 323.956 279.136 324.046Z" fill="currentColor"></path>
<path d="M292.384 324.495C292.788 324.585 293.417 324.585 293.731 324.495C294.001 324.36 293.686 324.271 292.923 324.271C292.204 324.271 291.935 324.36 292.384 324.495Z" fill="currentColor"></path>
</svg></div></div><div id="progress-bar" class="progress-bar"></div></div></div></div><div class="line-h"></div><canvas class="mdrcanvas"></canvas><div class="line-h"></div><div class="data-box"><div class="p-normal x-white">Refinement</div></div><a href="index_1.html" target="_blank" class="abs-text w-inline-block"><div>Created by Rigo</div></a></div><div class="try-again"><div class="try-again-inner"><div class="horizontal-l x-h-left-center"><div class="svg-icon w-embed"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" fill="currentColor" class="bi bi-hand-thumbs-down" viewBox="0 0 16 16">
  <path d="M8.864 15.674c-.956.24-1.843-.484-1.908-1.42-.072-1.05-.23-2.015-.428-2.59-.125-.36-.479-1.012-1.04-1.638-.557-.624-1.282-1.179-2.131-1.41C2.685 8.432 2 7.85 2 7V3c0-.845.682-1.464 1.448-1.546 1.07-.113 1.564-.415 2.068-.723l.048-.029c.272-.166.578-.349.97-.484C6.931.08 7.395 0 8 0h3.5c.937 0 1.599.478 1.934 1.064.164.287.254.607.254.913 0 .152-.023.312-.077.464.201.262.38.577.488.9.11.33.172.762.004 1.15.069.13.12.268.159.403.077.27.113.567.113.856s-.036.586-.113.856c-.035.12-.08.244-.138.363.394.571.418 1.2.234 1.733-.206.592-.682 1.1-1.2 1.272-.847.283-1.803.276-2.516.211a10 10 0 0 1-.443-.05 9.36 9.36 0 0 1-.062 4.51c-.138.508-.55.848-1.012.964zM11.5 1H8c-.51 0-.863.068-1.14.163-.281.097-.506.229-.776.393l-.04.025c-.555.338-1.198.73-2.49.868-.333.035-.554.29-.554.55V7c0 .255.226.543.62.65 1.095.3 1.977.997 2.614 1.709.635.71 1.064 1.475 1.238 1.977.243.7.407 1.768.482 2.85.025.362.36.595.667.518l.262-.065c.16-.04.258-.144.288-.255a8.34 8.34 0 0 0-.145-4.726.5.5 0 0 1 .595-.643h.003l.014.004.058.013a9 9 0 0 0 1.036.157c.663.06 1.457.054 2.11-.163.175-.059.45-.301.57-.651.107-.308.087-.67-.266-1.021L12.793 7l.353-.354c.043-.042.105-.14.154-.315.048-.167.075-.37.075-.581s-.027-.414-.075-.581c-.05-.174-.111-.273-.154-.315l-.353-.354.353-.354c.047-.047.109-.176.005-.488a2.2 2.2 0 0 0-.505-.804l-.353-.354.353-.354c.006-.005.041-.05.041-.17a.9.9 0 0 0-.121-.415C12.4 1.272 12.063 1 11.5 1"></path>
</svg></div><div class="h4">Again.</div></div></div></div><div class="success"><div class="try-again-inner"><div class="vertical-s"><div class="horizontal-l x-h-left-center"><div class="svg-icon up w-embed"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" fill="currentColor" class="bi bi-hand-thumbs-down" viewBox="0 0 16 16">
  <path d="M8.864 15.674c-.956.24-1.843-.484-1.908-1.42-.072-1.05-.23-2.015-.428-2.59-.125-.36-.479-1.012-1.04-1.638-.557-.624-1.282-1.179-2.131-1.41C2.685 8.432 2 7.85 2 7V3c0-.845.682-1.464 1.448-1.546 1.07-.113 1.564-.415 2.068-.723l.048-.029c.272-.166.578-.349.97-.484C6.931.08 7.395 0 8 0h3.5c.937 0 1.599.478 1.934 1.064.164.287.254.607.254.913 0 .152-.023.312-.077.464.201.262.38.577.488.9.11.33.172.762.004 1.15.069.13.12.268.159.403.077.27.113.567.113.856s-.036.586-.113.856c-.035.12-.08.244-.138.363.394.571.418 1.2.234 1.733-.206.592-.682 1.1-1.2 1.272-.847.283-1.803.276-2.516.211a10 10 0 0 1-.443-.05 9.36 9.36 0 0 1-.062 4.51c-.138.508-.55.848-1.012.964zM11.5 1H8c-.51 0-.863.068-1.14.163-.281.097-.506.229-.776.393l-.04.025c-.555.338-1.198.73-2.49.868-.333.035-.554.29-.554.55V7c0 .255.226.543.62.65 1.095.3 1.977.997 2.614 1.709.635.71 1.064 1.475 1.238 1.977.243.7.407 1.768.482 2.85.025.362.36.595.667.518l.262-.065c.16-.04.258-.144.288-.255a8.34 8.34 0 0 0-.145-4.726.5.5 0 0 1 .595-.643h.003l.014.004.058.013a9 9 0 0 0 1.036.157c.663.06 1.457.054 2.11-.163.175-.059.45-.301.57-.651.107-.308.087-.67-.266-1.021L12.793 7l.353-.354c.043-.042.105-.14.154-.315.048-.167.075-.37.075-.581s-.027-.414-.075-.581c-.05-.174-.111-.273-.154-.315l-.353-.354.353-.354c.047-.047.109-.176.005-.488a2.2 2.2 0 0 0-.505-.804l-.353-.354.353-.354c.006-.005.041-.05.041-.17a.9.9 0 0 0-.121-.415C12.4 1.272 12.063 1 11.5 1"></path>
</svg></div><div class="h4">Well done, Innie.</div></div><div class="p-normal align-right x-white"><a href="index_1.html" target="_blank" class="x-white">created by Rigo</a></div></div></div></div></div></div><div id="selectionRect" class="selection"></div><div class="scanlines vertical"></div><div class="scanlines"></div></main></div><script src="js/jquery-3.5.1.min.dc5e7f18c8.js" type="text/javascript" crossorigin="anonymous"></script><script src="js/webflow.eb214907.915eb917836c6389.js" type="text/javascript"></script><script>
window.onload = function() {
  // Get the current year
  const currentYear = new Date().getFullYear();
  
  // Find the text element you want to display the year in
  const textElement = document.querySelector('.textyear');
  
  // Set the text of the element to the current year
  textElement.innerHTML = currentYear;
};
</script>
<script>
// Grid dimensions & update
const getGridDimensions = () =>
  window.matchMedia('(max-width: 768px)').matches
    ? { cols: 15, rows: 20 }
    : window.matchMedia('(max-width: 1024px)').matches
      ? { cols: 20, rows: 15 }
      : { cols: 30, rows: 10 };
let cols, rows, grid = [];
const updateGrid = () => {
  const dims = getGridDimensions();
  cols = dims.cols; rows = dims.rows; grid = [];
  for (let y = 0; y < rows; y++) {
    let row = [];
    for (let x = 0; x < cols; x++) row.push(Math.floor(Math.random() * 10));
    grid.push(row);
  }
};

// Global setup
const canvas = document.querySelector('.mdrcanvas'),
      ctx = canvas.getContext('2d');
updateGrid();
const activeCells = [];
let groups = {}, nextGroupId = 1;
let hoveredCell = null, hoverEnd = null, randomStates = {}, HOVER_FADE_OUT_TIME = 250;
const SHAKE_INTENSITY = 0.6, REDUCTION_FACTOR = 0.45,
      SHAKE_AMPLITUDE = SHAKE_INTENSITY * REDUCTION_FACTOR,
      FREEDOM_FACTOR = 11.0, HOVER_INTENSITY_FACTOR = 4.0,
      COMMON_BASE_AMPLITUDE = (SHAKE_AMPLITUDE * FREEDOM_FACTOR * 0.5) * HOVER_INTENSITY_FACTOR,
      OFFSET_MULTIPLIER = 0.8;
let capturedGroups = [];
const capturedCoords = new Set();
let dragging = false, dragStart = null, dragCurrent = null;
const selectionRect = document.getElementById('selectionRect'),
      tryAgainDiv = document.querySelector('.try-again');
let progressValue = 0, successDisplayed = false;
const progressBar = document.getElementById('progress-bar'),
      percentageText = document.getElementById('percentage');

// Utilities
const lerp = (a, b, t) => a + (b - a) * t,
      easeInCubic = t => t * t * t;
const updateRandomState = (key, baseAmp, now) => {
  if (!randomStates[key])
    randomStates[key] = {
      currentOffsetX: (Math.random() - 0.5) * baseAmp,
      currentOffsetY: (Math.random() - 0.5) * baseAmp,
      targetOffsetX: (Math.random() - 0.5) * baseAmp,
      targetOffsetY: (Math.random() - 0.5) * baseAmp,
      currentScale: 1.0 + Math.random() * 0.1,
      targetScale: 1.0 + Math.random() * 0.1,
      lastUpdate: now,
      updateInterval: 100 + Math.random() * 200
    };
  let state = randomStates[key],
      t = (now - state.lastUpdate) / state.updateInterval;
  if (t > 1) t = 1;
  let interpOffsetX = lerp(state.currentOffsetX, state.targetOffsetX, t),
      interpOffsetY = lerp(state.currentOffsetY, state.targetOffsetY, t),
      interpScale = lerp(state.currentScale, state.targetScale, t);
  if (t >= 1) {
    state.currentOffsetX = state.targetOffsetX;
    state.currentOffsetY = state.targetOffsetY;
    state.currentScale = state.targetScale;
    state.targetOffsetX = (Math.random() - 0.5) * baseAmp;
    state.targetOffsetY = (Math.random() - 0.5) * baseAmp;
    state.targetScale = 1.0 + Math.random() * 0.1;
    state.lastUpdate = now;
    state.updateInterval = 100 + Math.random() * 200;
  }
  return { offsetX: interpOffsetX, offsetY: interpOffsetY, scale: interpScale };
};

// Resize & grid reinitialization
const resizeCanvas = () => {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight * 0.7;
  updateGrid();
  activeCells.length = 0;
  capturedGroups.length = 0;
  groups = {};
  capturedCoords.clear();
};
window.addEventListener('resize', resizeCanvas);
resizeCanvas();

// Helper functions (declared once)
const isCellGrowing = (x, y) =>
    activeCells.some(cell => cell.x === x && cell.y === y && cell.type === 'growth'),
  inRadius = (c1, c2, r) =>
    Math.abs(c1.x - c2.x) <= r && Math.abs(c1.y - c2.y) <= r,
  getActivePropagationGroupCount = () => {
    let ag = new Set();
    activeCells.forEach(cell => {
      if (cell.type === 'growth' && groups[cell.groupId] && groups[cell.groupId].propagate)
        ag.add(cell.groupId);
    });
    return ag.size;
  };

// Main animation loop
const animate = () => {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  const cellWidth = canvas.width / cols,
        cellHeight = canvas.height / rows,
        now = Date.now();
  let fontMultiplier = window.innerWidth < 768 ? 2 : window.innerWidth < 1024 ? 1.5 : 1;
  const fontSize = Math.min(cellWidth, cellHeight) * 0.40 * fontMultiplier;
  ctx.font = `${fontSize}px monospace`;
  ctx.textAlign = 'center'; ctx.textBaseline = 'middle';
  const dataBox = document.querySelector('.data-box');
  dataBox.style.boxShadow =
    capturedGroups.length > 0 ? '0 0 50px rgba(183,230,250,1)' : '0 0 50px rgba(183,230,250,0)';
  for (let y = 0; y < rows; y++)
    for (let x = 0; x < cols; x++) {
      const key = `${x},${y}`;
      if (capturedCoords.has(key)) continue;
      if (!isCellGrowing(x, y) && !(hoveredCell && inRadius({ x, y }, hoveredCell, 2)) && !(hoverEnd && inRadius({ x, y }, hoverEnd, 2))) {
        ctx.save();
        ctx.translate(x * cellWidth + cellWidth / 2, y * cellHeight + cellHeight / 2);
        ctx.fillStyle = '#00ffff';
        ctx.fillText(grid[y][x], 0, 0);
        ctx.restore();
      }
    }
  for (let y = 0; y < rows; y++)
    for (let x = 0; x < cols; x++) {
      let growthCell = activeCells.find(cell => cell.x === x && cell.y === y && cell.type === 'growth'),
          isGrowth = !!growthCell,
          isHover = (hoveredCell && inRadius({ x, y }, hoveredCell, 2)) || (hoverEnd && inRadius({ x, y }, hoverEnd, 2));
      if (!isGrowth && !isHover) continue;
      const key = `${x},${y}`;
      let fadeFactor = (!hoveredCell && hoverEnd) ? Math.max(0, 1 - (now - hoverEnd.fadeStart) / HOVER_FADE_OUT_TIME) : 1;
      const randData = updateRandomState(key, COMMON_BASE_AMPLITUDE, now);
      let offsetX = randData.offsetX * (isGrowth ? OFFSET_MULTIPLIER : 1),
          offsetY = randData.offsetY * (isGrowth ? OFFSET_MULTIPLIER : 1);
      if (isHover && !hoveredCell) { offsetX *= fadeFactor; offsetY *= fadeFactor; }
      let scale = 1;
      if (isGrowth) {
        if (!growthCell.growthStart) {
          growthCell.growthStart = now;
          growthCell.growthDuration = 3000 + Math.random() * 4000;
        }
        const growthProgress = Math.min((now - growthCell.growthStart) / growthCell.growthDuration, 1);
        scale = 1 + growthProgress * growthCell.maxScale;
        if (growthProgress >= 1 && !growthCell.shrinking) {
          growthCell.shrinking = true;
          growthCell.shrinkStart = now;
          growthCell.shrinkDuration = 2000 + Math.random() * 4000;
        }
        if (growthCell.shrinking) {
          const shrinkProgress = Math.min((now - growthCell.shrinkStart) / growthCell.shrinkDuration, 1);
          scale = 1 + (1 - shrinkProgress) * growthCell.maxScale;
          if (shrinkProgress >= 1) {
            const idx = activeCells.indexOf(growthCell);
            if (idx > -1) { activeCells.splice(idx, 1); continue; }
          }
        }
      } else if (isHover) { scale = randData.scale; }
      ctx.save();
      ctx.translate(x * cellWidth + cellWidth / 2 + offsetX, y * cellHeight + cellHeight / 2 + offsetY);
      ctx.scale(scale, scale);
      ctx.fillStyle = '#00ffff';
      ctx.fillText(grid[y][x], 0, 0);
      ctx.restore();
    }
  const target = { x: canvas.width / 2, y: canvas.height - 30 };
  for (let i = capturedGroups.length - 1; i >= 0; i--) {
    const group = capturedGroups[i], elapsed = now - group.captureStart;
    if (elapsed < 500) {
      group.cells.forEach(cellObj => {
        const t = elapsed / 500,
              pos = { x: lerp(cellObj.initialPos.x, group.center.x, t), y: lerp(cellObj.initialPos.y, group.center.y, t) };
        ctx.globalAlpha = 1; ctx.filter = 'none'; ctx.fillStyle = '#00ffff';
        ctx.fillText(cellObj.value, pos.x, pos.y);
      });
    } else if (elapsed < 1500) {
      const t = (elapsed - 500) / 1000, easeT = easeInCubic(t),
            pos = { x: lerp(group.center.x, target.x, easeT), y: lerp(group.center.y, target.y, easeT) };
      ctx.globalAlpha = 1 - easeT;
      ctx.filter = `blur(${easeT * 2}px)`;
      ctx.fillStyle = '#00ffff';
      ctx.fillText(group.displayValue, pos.x, pos.y);
    } else {
      group.cells.forEach(c => {
        grid[c.y][c.x] = Math.floor(Math.random() * 10);
        capturedCoords.delete(`${c.x},${c.y}`);
      });
      const inc = Math.random() * 5 + 7;
      progressValue = Math.min(100, progressValue + inc);
      progressBar.style.width = progressValue + "%";
      percentageText.textContent = Math.round(progressValue) + "%";
      if (!successDisplayed && progressValue === 100) {
        successDisplayed = true;
        document.querySelector('.success').style.display = 'flex';
      }
      capturedGroups.splice(i, 1);
    }
    ctx.filter = 'none'; ctx.globalAlpha = 1;
  }
  requestAnimationFrame(animate);
};
requestAnimationFrame(animate);

// Mouse interactions
canvas.addEventListener('mousemove', e => {
  const rect = canvas.getBoundingClientRect(),
        cellWidth = rect.width / cols,
        cellHeight = rect.height / rows,
        x = Math.floor((e.clientX - rect.left) / cellWidth),
        y = Math.floor((e.clientY - rect.top) / cellHeight);
  hoveredCell = { x, y }; hoverEnd = null;
});
canvas.addEventListener('mouseleave', () => {
  if (hoveredCell) hoverEnd = { x: hoveredCell.x, y: hoveredCell.y, fadeStart: Date.now() };
  hoveredCell = null;
});
canvas.addEventListener('mousedown', e => {
  dragging = true;
  const rect = canvas.getBoundingClientRect();
  dragStart = { x: e.clientX - rect.left, y: e.clientY - rect.top };
  selectionRect.style.display = 'block';
  selectionRect.style.left = `${e.clientX}px`;
  selectionRect.style.top = `${e.clientY}px`;
  selectionRect.style.width = '0px'; selectionRect.style.height = '0px';
});
canvas.addEventListener('mousemove', e => {
  if (dragging) {
    const rect = canvas.getBoundingClientRect();
    dragCurrent = { x: e.clientX - rect.left, y: e.clientY - rect.top };
    const left = Math.min(dragStart.x, dragCurrent.x),
          top = Math.min(dragStart.y, dragCurrent.y),
          width = Math.abs(dragStart.x - dragCurrent.x),
          height = Math.abs(dragStart.y - dragCurrent.y),
          viewportLeft = e.clientX - (dragCurrent.x - left),
          viewportTop = e.clientY - (dragCurrent.y - top);
    selectionRect.style.left = `${viewportLeft}px`;
    selectionRect.style.top = `${viewportTop}px`;
    selectionRect.style.width = `${width}px`;
    selectionRect.style.height = `${height}px`;
  }
});
canvas.addEventListener('mouseup', e => {
  if (dragging) {
    dragging = false;
    selectionRect.style.display = 'none';
    const rect = canvas.getBoundingClientRect(),
          dragEndCanvas = dragCurrent || { x: e.clientX - rect.left, y: e.clientY - rect.top },
          selLeft = Math.min(dragStart.x, dragEndCanvas.x),
          selRight = Math.max(dragStart.x, dragEndCanvas.x),
          selTop = Math.min(dragStart.y, dragEndCanvas.y),
          selBottom = Math.max(dragStart.y, dragEndCanvas.y),
          nowCapture = Date.now();
    const selectedGroupIds = new Set();
    activeCells.forEach(cell => {
      const cellLeft = cell.x * (rect.width / cols),
            cellRight = (cell.x + 1) * (rect.width / cols),
            cellTop = cell.y * (rect.height / rows),
            cellBottom = (cell.y + 1) * (rect.height / rows);
      if (cellLeft >= selLeft && cellRight <= selRight && cellTop >= selTop && cellBottom <= selBottom)
        selectedGroupIds.add(cell.groupId);
    });
    let capturedAny = false;
    selectedGroupIds.forEach(groupId => {
      const groupCells = activeCells.filter(cell => cell.groupId === groupId);
      if (groupCells.length >= 7 && groupCells.length <= 11) {
        const capturedCells = [];
        let sumX = 0, sumY = 0;
        groupCells.forEach(cell => {
          const key = `${cell.x},${cell.y}`;
          capturedCoords.add(key);
          const cellCenterX = (cell.x + 0.5) * (rect.width / cols),
                cellCenterY = (cell.y + 0.5) * (rect.height / rows);
          capturedCells.push({ x: cell.x, y: cell.y, initialPos: { x: cellCenterX, y: cellCenterY }, value: grid[cell.y][cell.x] });
          sumX += cellCenterX, sumY += cellCenterY;
        });
        const center = { x: sumX / capturedCells.length, y: sumY / capturedCells.length },
              randomIndex = Math.floor(Math.random() * capturedCells.length),
              displayValue = capturedCells[randomIndex].value;
        capturedGroups.push({ groupId, cells: capturedCells, center, captureStart: Date.now(), displayValue });
        for (let i = activeCells.length - 1; i >= 0; i--) {
          if (activeCells[i].groupId === groupId) activeCells.splice(i, 1);
        }
        capturedAny = true;
      }
    });
    if (!capturedAny) {
      tryAgainDiv.style.display = 'flex';
      const tryAgainTimeout = setTimeout(() => { tryAgainDiv.style.display = 'none'; }, 1500);
      const handleClick = () => {
        clearTimeout(tryAgainTimeout);
        tryAgainDiv.style.display = 'none';
        tryAgainDiv.removeEventListener('click', handleClick);
      };
      tryAgainDiv.addEventListener('click', handleClick);
    }
  }
});

// Touch interactions (Mobile)
const getTouchPos = event => {
  const touch = event.touches[0] || event.changedTouches[0];
  return { x: touch.clientX, y: touch.clientY };
};
canvas.addEventListener('touchstart', event => {
  event.preventDefault();
  const pos = getTouchPos(event), rect = canvas.getBoundingClientRect();
  dragging = true;
  dragStart = { x: pos.x - rect.left, y: pos.y - rect.top };
  selectionRect.style.display = 'block';
  selectionRect.style.left = `${pos.x}px`;
  selectionRect.style.top = `${pos.y}px`;
  selectionRect.style.width = '0px'; selectionRect.style.height = '0px';
}, { passive: false });
canvas.addEventListener('touchmove', event => {
  event.preventDefault();
  if (dragging) {
    const pos = getTouchPos(event), rect = canvas.getBoundingClientRect();
    dragCurrent = { x: pos.x - rect.left, y: pos.y - rect.top };
    const left = Math.min(dragStart.x, dragCurrent.x),
          top = Math.min(dragStart.y, dragCurrent.y),
          width = Math.abs(dragStart.x - dragCurrent.x),
          height = Math.abs(dragStart.y - dragCurrent.y),
          viewportLeft = pos.x - (dragCurrent.x - left),
          viewportTop = pos.y - (dragCurrent.y - top);
    selectionRect.style.left = `${viewportLeft}px`;
    selectionRect.style.top = `${viewportTop}px`;
    selectionRect.style.width = `${width}px`;
    selectionRect.style.height = `${height}px`;
  }
}, { passive: false });
canvas.addEventListener('touchend', event => {
  event.preventDefault();
  if (dragging) {
    dragging = false;
    selectionRect.style.display = 'none';
    const rect = canvas.getBoundingClientRect(),
          dragEndCanvas = dragCurrent || dragStart,
          selLeft = Math.min(dragStart.x, dragEndCanvas.x),
          selRight = Math.max(dragStart.x, dragEndCanvas.x),
          selTop = Math.min(dragStart.y, dragEndCanvas.y),
          selBottom = Math.max(dragStart.y, dragEndCanvas.y),
          nowCapture = Date.now();
    const selectedGroupIds = new Set();
    activeCells.forEach(cell => {
      const cellLeft = cell.x * (rect.width / cols),
            cellRight = (cell.x + 1) * (rect.width / cols),
            cellTop = cell.y * (rect.height / rows),
            cellBottom = (cell.y + 1) * (rect.height / rows);
      if (cellLeft >= selLeft && cellRight <= selRight && cellTop >= selTop && cellBottom <= selBottom)
        selectedGroupIds.add(cell.groupId);
    });
    let capturedAny = false;
    selectedGroupIds.forEach(groupId => {
      const groupCells = activeCells.filter(cell => cell.groupId === groupId);
      if (groupCells.length >= 7 && groupCells.length <= 11) {
        const capturedCells = [];
        let sumX = 0, sumY = 0;
        groupCells.forEach(cell => {
          const key = `${cell.x},${cell.y}`;
          capturedCoords.add(key);
          const cellCenterX = (cell.x + 0.5) * (rect.width / cols),
                cellCenterY = (cell.y + 0.5) * (rect.height / rows);
          capturedCells.push({ x: cell.x, y: cell.y, initialPos: { x: cellCenterX, y: cellCenterY }, value: grid[cell.y][cell.x] });
          sumX += cellCenterX, sumY += cellCenterY;
        });
        const center = { x: sumX / capturedCells.length, y: sumY / capturedCells.length },
              randomIndex = Math.floor(Math.random() * capturedCells.length),
              displayValue = capturedCells[randomIndex].value;
        capturedGroups.push({ groupId, cells: capturedCells, center, captureStart: Date.now(), displayValue });
        for (let i = activeCells.length - 1; i >= 0; i--) {
          if (activeCells[i].groupId === groupId) activeCells.splice(i, 1);
        }
        capturedAny = true;
      }
    });
    if (!capturedAny) {
      tryAgainDiv.style.display = 'flex';
      const tryAgainTimeout = setTimeout(() => { tryAgainDiv.style.display = 'none'; }, 1500);
      const handleClick = () => {
        clearTimeout(tryAgainTimeout);
        tryAgainDiv.style.display = 'none';
        tryAgainDiv.removeEventListener('click', handleClick);
      };
      tryAgainDiv.addEventListener('click', handleClick);
    }
  }
}, { passive: false });
  
// Group growth propagation & random growth
const propagateGrowth = () => {
  const now = Date.now();
  for (let y = 0; y < rows; y++)
    for (let x = 0; x < cols; x++) {
      if (!isCellGrowing(x, y)) {
        const neighborGroups = {};
        for (let ny = y - 2; ny <= y + 2; ny++)
          for (let nx = x - 2; nx <= x + 2; nx++)
            if (nx >= 0 && nx < cols && ny >= 0 && ny < rows) {
              const neighbor = activeCells.find(cell => cell.x === nx && cell.y === ny && cell.type === 'growth');
              if (neighbor && groups[neighbor.groupId] && groups[neighbor.groupId].propagate)
                neighborGroups[neighbor.groupId] = (neighborGroups[neighbor.groupId] || 0) + 1;
            }
        for (const gId in neighborGroups)
          if (groups[gId] && groups[gId].count < groups[gId].target) {
            const probability = Math.min(1, 0.3125 * neighborGroups[gId]);
            if (Math.random() < probability) {
              activeCells.push({
                x,
                y,
                type: 'growth',
                groupId: parseInt(gId),
                maxScale: 0.9 + Math.random() * 0.2,
                growthStart: now,
                growthDuration: 3000 + Math.random() * 4000,
                shrinking: false
              });
              groups[gId].count++;
              break;
            }
          }
      }
    }
};
setInterval(propagateGrowth, 300);
const triggerRandomGrowth = () => {
  let solitaryCount = activeCells.filter(cell => !groups[cell.groupId]?.propagate).length;
  if (solitaryCount >= 4) return;
  const x = Math.floor(Math.random() * cols),
        y = Math.floor(Math.random() * rows);
  if (!isCellGrowing(x, y)) {
    const now = Date.now(),
          activePropagationCount = getActivePropagationGroupCount();
    let highGrowth = activePropagationCount < 2 && Math.random() < 0.7;
    const groupId = nextGroupId++, targetSize = 7 + Math.floor(Math.random() * 5);
    groups[groupId] = { count: 1, target: targetSize, propagate: highGrowth };
    activeCells.push({
      x,
      y,
      type: 'growth',
      groupId,
      maxScale: highGrowth ? (0.9 + Math.random() * 0.2) : (0.5 + Math.random() * 0.3),
      growthStart: now,
      growthDuration: 3000 + Math.random() * 4000,
      shrinking: false
    });
  }
};
const scheduleRandomGrowth = () => {
  const delay = 3000 + Math.random() * 2000;
  setTimeout(() => { triggerRandomGrowth(); scheduleRandomGrowth(); }, delay);
};
scheduleRandomGrowth();

</script></body></html>
